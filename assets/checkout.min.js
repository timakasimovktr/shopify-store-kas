/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./source/js/checkout/checkout.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./source/js/checkout/checkout.js":
/*!****************************************!*\
  !*** ./source/js/checkout/checkout.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("const CHECKOUT_STEPS = {\n  CONTACT: 'contact_information',\n  SHIPPING: 'shipping_method',\n  PAYMENT: 'payment_method',\n  REVIEW: 'review'\n};\nfunction getCurrentStep() {\n  if (window.Shopify && window.Shopify.Checkout && window.Shopify.Checkout.step) {\n    switch (window.Shopify.Checkout.step) {\n      case CHECKOUT_STEPS.CONTACT:\n        return CHECKOUT_STEPS.CONTACT;\n      case CHECKOUT_STEPS.SHIPPING:\n        return CHECKOUT_STEPS.SHIPPING;\n      case CHECKOUT_STEPS.PAYMENT:\n        return CHECKOUT_STEPS.PAYMENT;\n      case CHECKOUT_STEPS.REVIEW:\n        return CHECKOUT_STEPS.REVIEW;\n      default:\n        return false;\n    }\n  } else {\n    return false;\n  }\n}\nfunction onlyUnique(value, index, self) {\n  return self.indexOf(value) === index;\n}\nvar _checkoutBundlePriceSum = [];\nvar _checkoutBundleDiscountPriceSum = [];\nvar shippingMethodMessage;\n\n// Adding shipping info for customized products\nif (typeof Checkout != 'undefined') {\n  Checkout.$(document).on('page:load page:change', function () {\n    window.scrollTo(0, 0);\n    if ($('.content-checkout .product-table').length > 0) {\n      var bundled_titles = [];\n      var monogram_fee_price = 0;\n      var monogram_fee_price_original = 0;\n      var $container = $('.content-checkout .product-table');\n      $container.find('tbody tr').each(function (i) {\n        var preorder_date = '';\n        var $td = $(this).find('.product__description');\n        var bundle_title = \"\";\n        var bundle_variant_title = \"\";\n        var bundle_item_title = \"\";\n        var bundle_image = \"\";\n        var bundle_url = \"\";\n        var monogram_lineitem = false;\n        let $firstVisibleProperty, $spanNoDiscountsAllowed, $spanNoGiftWrapAllowed, $spanSaleDiscount, $msg;\n        if ($td.find('span.product__description__property').length > 0) {\n          $td.find('span.product__description__property').each(function () {\n            var property = $(this).html().split(':');\n            var first = property[0].trim();\n            var last = property[1].trim();\n            switch (first) {\n              case 'Bundle Item Title':\n                bundle_item_title = last;\n                $(this).hide();\n                break;\n              case 'Bundle URL':\n                bundle_url = last;\n                $(this).hide();\n                break;\n              case 'Bundle Title':\n                bundle_title = last;\n                $(this).hide();\n                break;\n              case 'Bundle Variant Title':\n                bundle_variant_title = last;\n                $(this).hide();\n                break;\n              case 'Bundle Image':\n                bundle_image = last;\n                $(this).hide();\n                break;\n              case 'preorder':\n                preorder_date = last;\n                $(this).html('Expected Shipping Date:  <br>' + preorder_date);\n                break;\n              case 'Monogram Place':\n                monogram_lineitem = true;\n                $(this).hide();\n                break;\n              case 'saleDiscountMsg':\n                $spanSaleDiscount = $(this);\n                $spanSaleDiscount.addClass('custom-message');\n                $msg = $('<i>');\n                $msg.text(last);\n                $spanSaleDiscount.html($msg);\n                break;\n              case 'saleDiscount':\n                let $this = $(this);\n                let $tr = $this.closest('tr');\n                $this.hide();\n\n                // condition avoids duplication\n                if ($tr.find('.reduction-code__text').length == 0 && $tr.find('.compare-price').length == 0) {\n                  let $price = $('<p>');\n                  $price.text('$' + last);\n                  let $delPrice = $('<del>');\n                  $delPrice.append($price);\n                  $delPrice.addClass('compare-price order-summary__emphasis');\n                  $delPrice.css('margin-left', '1rem');\n                  $tr.find('.product__price').prepend($delPrice);\n                }\n                break;\n              case 'noDiscountsAllowed':\n                $spanNoDiscountsAllowed = $(this);\n                $spanNoDiscountsAllowed.addClass('custom-message');\n                $msg = $('<i>');\n                $msg.text(last);\n                $spanNoDiscountsAllowed.html($msg);\n                break;\n              case 'no_gift_wrap_allowed':\n                $spanNoGiftWrapAllowed = $(this);\n                $spanNoGiftWrapAllowed.addClass('custom-message');\n                $msg = $('<i>');\n                $msg.text(last);\n                $spanNoGiftWrapAllowed.html($msg);\n                break;\n            }\n\n            // hide bundle property descriptions\n            var propertyText = $(this).text().toUpperCase();\n            if (propertyText.includes('BUNDLE') || propertyText.includes('DISCOUNTAMOUNT') || propertyText.includes('REDIRECT')) {\n              $(this).addClass('hide-bundle-desc-property');\n            }\n          });\n        }\n        var new_title = bundle_title + ' || ' + bundle_variant_title;\n        bundled_titles.push(new_title);\n        $(this).data('bundle-title', new_title);\n        $(this).data('bundle-item-title', bundle_item_title);\n        $(this).data('bundle-image', bundle_image);\n        $(this).data('bundle-url', bundle_url);\n        $(this).data('monogram', monogram_lineitem);\n        var itemTitle = $td.find('span.product__description__name').text().toLowerCase();\n        if (itemTitle.search(\"monogram\") != -1) {\n          var mono_qty = parseInt($(this).find('span.product-thumbnail__quantity').text());\n          var mono_total_price = parseFloat($(this).find('.product__price .order-summary__emphasis').html().replace('$', ''));\n          monogram_fee_price = parseFloat(mono_total_price / mono_qty);\n          if ($(this).find('.product__price del.order-summary__small-text').length > 0) {\n            var mono_total_price_total = parseFloat($(this).find('.product__price del.order-summary__small-text').html().replace('$', ''));\n            monogram_fee_price_original = parseFloat(mono_total_price_total / mono_qty);\n          }\n          $(this).hide();\n        }\n\n        // chnage color\n        var variant_str = $td.find('span.product__description__variant ').text();\n        if (variant_str != '') {\n          variant_str = variant_str.replace(/\\([^)]*\\)/g, \"\");\n          $td.find('span.product__description__variant ').text(variant_str);\n        }\n\n        // put saleDiscount before noDiscounts\n        if ($spanNoDiscountsAllowed != undefined && $spanSaleDiscount != undefined) {\n          $spanNoDiscountsAllowed.before($spanSaleDiscount);\n        }\n        if ($firstVisibleProperty != undefined) {\n          $firstVisibleProperty.css('margin-top', '1rem');\n        }\n        $container.find('th').each((i, th) => {\n          $(th).find('.custom-message').first().css('margin-top', '1rem');\n        });\n      });\n      var bundled_titles = bundled_titles.filter(onlyUnique);\n      for (var i = 0; i < bundled_titles.length; i++) {\n        _checkoutBundlePriceSum.push(0);\n        _checkoutBundleDiscountPriceSum.push(0);\n      }\n      for (var i = 0; i < bundled_titles.length; i++) {\n        var _cnts = 0;\n        var first = null;\n        var itemObjs = [];\n        var priceSum = 0;\n        var priceSumDiscount = 0;\n        var discountPrice = 0;\n        $container.find('tbody tr').each(function (j) {\n          var _bundle_title = $(this).data('bundle-title');\n          if (_bundle_title != \" || \" && _bundle_title == bundled_titles[i]) {\n            _cnts += 1;\n            if (_cnts == 1) {\n              first = $(this);\n            } else {\n              itemObjs.push($(this));\n            }\n            priceSum += parseFloat($(this).find('.product__price .order-summary__emphasis').html().replace('$', ''));\n            if ($(this).find('.product__price del.order-summary__small-text').length > 0) {\n              priceSumDiscount += parseFloat($(this).find('.product__price del.order-summary__small-text').html().replace('$', ''));\n            } else {\n              priceSumDiscount += parseFloat($(this).find('.product__price .order-summary__emphasis').html().replace('$', ''));\n            }\n          }\n        });\n        if (_checkoutBundlePriceSum[i] == 0) {\n          _checkoutBundlePriceSum[i] = priceSum;\n        }\n        if (_checkoutBundleDiscountPriceSum[i] == 0) {\n          _checkoutBundleDiscountPriceSum[i] = priceSumDiscount;\n        }\n        var only_title = bundled_titles[i].split(\" || \");\n        $(first).find('.product__description .product__description__name').html(only_title[0]);\n        var bundle_image = $(first).data('bundle-image');\n        $(first).find('.product-thumbnail__image').attr('alt', only_title[0]).attr('src', bundle_image);\n        if ($(first).find('.product__description div.included_products').length == 0) {\n          $(first).find('.product__description').append('<div class=\"included_products\"></div>');\n        }\n        if (_checkoutBundlePriceSum[i] >= _checkoutBundleDiscountPriceSum[i]) {\n          discountPrice = priceSum;\n        } else {\n          discountPrice = _checkoutBundlePriceSum[i];\n        }\n        $(first).find('.product__price .order-summary__emphasis').html('$' + discountPrice.toFixed(2));\n        if ($(first).find('.product__price del.order-summary__small-text').length > 0) {\n          $(first).find('.product__price del.order-summary__small-text').html('$' + _checkoutBundleDiscountPriceSum[i].toFixed(2));\n        }\n\n        // trading discount\n        if ($(first).find('.reduction-code__text').length > 0) {\n          let $codeTxt = $(first).find('.reduction-code__text');\n          let _code_txt_arr = $codeTxt.text().split('$');\n          if (_code_txt_arr.length == 2) {\n            let _bundle_total_discount = _checkoutBundleDiscountPriceSum[i].toFixed(2) - discountPrice.toFixed(2);\n            $codeTxt.text(_code_txt_arr[0] + '$' + _bundle_total_discount + ')');\n          }\n        }\n        var included_products_list = $(first).find('.product__description div.included_products');\n        $(included_products_list).html('');\n        $(included_products_list).append('<div class=\"product__description__property order-summary__small-text\">INCLUDES</div>');\n        $(included_products_list).append('<div class=\"product__description__property order-summary__small-text\">' + $(first).data('bundle-item-title') + '</div>');\n        for (var m = 0; m < itemObjs.length; m++) {\n          var first_price = parseFloat($(first).find('.product__price .order-summary__emphasis').html().replace('$', ''));\n          var item = itemObjs[m];\n          var included_str = $(item).data('bundle-item-title');\n          $(included_products_list).append('<div class=\"product__description__property order-summary__small-text\">' + included_str + '</div>');\n          $(item).hide();\n        }\n      }\n\n      // progress for monogram\n      $container.find('tbody tr').each(function (i) {\n        var _monogram = $(this).data('monogram');\n        if (_monogram) {\n          if ($(this).find('.product__price .order-summary__emphasis').data('calculated') !== true) {\n            var priceSum = parseFloat($(this).find('.product__price .order-summary__emphasis').html().replace('$', ''));\n            var mono_qty = parseInt($(this).find('span.product-thumbnail__quantity').text());\n            priceSum += monogram_fee_price * mono_qty;\n            $(this).find('.product__price .order-summary__emphasis').html('$' + priceSum.toFixed(2)).data('calculated', true);\n            if ($(this).find('.product__price del.order-summary__small-text').length > 0) {\n              var priceSum_origin = parseFloat($(this).find('.product__price del.order-summary__small-text').html().replace('$', ''));\n              priceSum_origin += monogram_fee_price_original * mono_qty;\n              $(this).find('.product__price del.order-summary__small-text').html('$' + priceSum_origin.toFixed(2)).data('calculated', true);\n            }\n          }\n          var $td = $(this).find('td.product__description');\n          var added_monogram_lineitem = false;\n          if ($td.find('span.product__description__property').length > 0) {\n            $td.find('span.product__description__property').each(function () {\n              var property = $(this).html().split(':');\n              var first = property[0].trim();\n              var last = property[1].trim();\n              switch (first) {\n                case 'Monogram Fee':\n                  added_monogram_lineitem = true;\n                  break;\n              }\n            });\n          }\n          if (!added_monogram_lineitem) {\n            var _real_monogram_fee = monogram_fee_price > monogram_fee_price_original ? monogram_fee_price : monogram_fee_price_original;\n            $td.append('<span class=\"product__description__property order-summary__small-text\">Monogram Fee: + $' + parseInt(_real_monogram_fee) + '</span>');\n          }\n        }\n      });\n\n      // discount button\n      if ($('button[data-trekkie-id=\"apply_discount_button\"]').length > 0) {\n        if (!$('button[data-trekkie-id=\"apply_discount_button\"]').hasClass('btn--solid')) {\n          $('button[data-trekkie-id=\"apply_discount_button\"]').addClass('btn--solid');\n        }\n      }\n    }\n    var $discountTags = $('.total-line-table .reduction-code__text');\n    var $discountTag;\n    for (let i = 0; i < $discountTags.length; i++) {\n      $discountTag = $($discountTags[i]);\n      if ($discountTag.html().toString().toUpperCase() == \"HOLIDAY\") {\n        $discountTag.closest('tr').addClass('hidden');\n        break;\n      }\n    }\n    if ($('.logged-in-customer-information').length > 0) {\n      var logout = $('.logged-in-customer-information a');\n      $(logout).attr('href', 'https://kassatex.com/account/logout?return_url=https%3A%2F%2Fkassatex.com%2F');\n    }\n    appendInternationalShippingNote();\n  });\n}\n\n/**\r\n * This method adds custom msg for international shipping\r\n * methods\r\n */\nfunction appendInternationalShippingNote() {\n  var $shippingSection = $('.section.section--shipping-method');\n  if ($shippingSection.length > 0) {\n    var $shippingMethodsLabels = $shippingSection.find('.content-box__row .radio__label__primary');\n    $shippingMethodsLabels.each(function (i, elem) {\n      var $methodLabel = $(elem);\n      if ($methodLabel.text().toUpperCase().includes('INTERNATIONAL')) {\n        $methodLabel.append(['<small style=\"display: block\">Duties and customs charges not included.</small>']);\n      }\n    });\n  }\n}\n\n/**\r\n * This will hide the discount line\r\n * in the subtotals/totals section\r\n */\nfunction hideBFCMDiscountLine() {\n  var discountsContainer, discount, discountText;\n  discountsContainer = document.getElementsByClassName('tags-list');\n  if (discountsContainer && discountsContainer.length > 0) {\n    discountsContainer = discountsContainer[0];\n    discount = discountsContainer.getElementsByClassName('tag');\n    if (discount && discount.length > 0) {\n      discount = discount[0];\n      discountText = discount.getElementsByClassName('reduction-code');\n      if (discountText) {\n        document.getElementsByClassName('total-line--reduction')[0].style.display = 'none';\n      }\n    }\n  }\n}\n\n/*\r\n * This function will update the subtotal of\r\n * each product with monigram design\r\n */\nfunction updateMonogramSubtotals() {\n  var products = document.getElementsByClassName('product-table')[0].getElementsByClassName('product');\n  var properties,\n    monogrammedProduct = false;\n  var monogramPrice, delPriceElem, currentDelPrice, priceWithMonogram;\n  monogramPrice = getMonogramPrice(products[0].parentNode.getElementsByClassName('product'));\n  for (let i = 0; i < products.length; i++) {\n    delPriceElem = undefined;\n    currentDelPrice = 0;\n    priceWithMonogram = 0;\n    monogrammedProduct = false;\n    properties = products[i].getElementsByClassName('product__description__property');\n    for (let j = 0; j < properties.length; j++) {\n      if (properties[j].innerHTML.toUpperCase().includes('MONOGRAM')) {\n        monogrammedProduct = true;\n        break;\n      }\n    }\n    if (monogrammedProduct && products[i].dataset.priceWithMonogram == undefined) {\n      delPriceElem = products[i].getElementsByClassName('product__price')[0].getElementsByClassName('order-summary__small-text');\n      if (delPriceElem && delPriceElem.length > 0) {\n        delPriceElem = delPriceElem[0];\n        currentDelPrice = delPriceElem.innerText.replace('$', '') * 1;\n        priceWithMonogram = (1 * currentDelPrice + monogramPrice).toFixed(2);\n        products[i].getElementsByClassName('product__price')[0].getElementsByClassName('order-summary__small-text')[0].innerText = '$' + (1 * currentDelPrice + monogramPrice).toFixed(2);\n        products[i].dataset.priceWithMonogram = priceWithMonogram;\n      }\n    }\n  }\n}\n\n/*\r\n * This function will get the related monogram price\r\n* of a particular product (previous or next product in cart)\r\n */\nfunction getMonogramPrice(products) {\n  var monogramPrice = 0,\n    monogramSubtotal,\n    monogramQty;\n  for (let i = 0; i < products.length; i++) {\n    if (products[i].getElementsByClassName('product__description__name')[0].innerHTML.toUpperCase().includes('MONOGRAM')) {\n      monogramQty = products[i].getElementsByClassName('product-thumbnail__quantity')[0].innerText * 1;\n      monogramSubtotal = products[i].getElementsByClassName('product__price')[0].getElementsByClassName('order-summary__emphasis')[0].innerText.replace('$', '') * 1;\n      monogramPrice = monogramSubtotal / monogramQty;\n      break;\n    }\n  }\n  return monogramPrice;\n}\nfunction appendShippingMessage() {\n  if (document.querySelector('#shipping-method-msg')) {\n    return;\n  }\n  const shippingTitleElem = document.querySelector('.section--shipping-method .section__title');\n  let shippingMsgElem = document.createElement('p');\n  shippingMsgElem.innerHTML = shippingMethodMessage;\n  shippingMsgElem.setAttribute('id', 'shipping-method-msg');\n  insertAfter(shippingTitleElem, shippingMsgElem);\n}\nfunction setupHatPackagingInfo() {\n  const products = document.querySelectorAll('.product-table .product');\n  for (let i = 0; i < products.length; i++) {\n    const productProperties = products[i].querySelectorAll('.product__description__property');\n    for (let j = 0; j < productProperties.length; j++) {\n      if (productProperties[j].innerText.includes('isPackagingProduct')) {\n        // Hide Packaging Product\n        products[i].classList.add('hidden');\n        break;\n      } else if (productProperties[j].innerText.includes('isBeachHatsCollection')) {\n        // Change Packaging Product Quantites\n        const productQuantity = +products[i].querySelector('.product-thumbnail__quantity').innerText;\n        productProperties[j].innerText = productProperties[j].innerText.replace('isBeachHatsCollection', 'Packaging Quantity').replace('true', productQuantity);\n        break;\n      }\n    }\n  }\n}\nfunction insertAfter(targetNode, newNode) {\n  if (getCurrentStep() == CHECKOUT_STEPS.SHIPPING) {\n    targetNode.parentNode.insertBefore(newNode, targetNode.nextSibling);\n  }\n}\nvar mutationHappened = false;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  shippingMethodMessage = document.querySelector('#shipping-method-message-t').value;\n  new MutationObserver(mutations => {\n    mutations.forEach(({\n      type,\n      target\n    }) => {\n      if (!mutationHappened) {\n        mutationHappened = true;\n        setTimeout(function () {\n          hideBFCMDiscountLine();\n          updateMonogramSubtotals();\n          appendShippingMessage();\n          setupHatPackagingInfo();\n          mutationHappened = false;\n        }, 100);\n      }\n    });\n  }).observe(document.querySelector('.order-summary__sections'), {\n    childList: true,\n    subtree: true\n  });\n  hideBFCMDiscountLine();\n  updateMonogramSubtotals();\n});\n\n//# sourceURL=webpack:///./source/js/checkout/checkout.js?");

/***/ })

/******/ });